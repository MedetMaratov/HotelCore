2024-03-20 19:53:04.505 +05:00  INF  Executed DbCommand (88ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-03-20 19:53:04.864 +05:00  INF  Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2024-03-20 19:53:04.936 +05:00  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-03-20 19:53:04.947 +05:00  INF  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-03-20 19:53:05.187 +05:00  INF  No migrations were applied. The database is already up to date.
2024-03-20 19:53:05.366 +05:00  INF  Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
REVOKE CONNECT ON DATABASE "RoomService" FROM PUBLIC;
SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE datname = 'RoomService';
2024-03-20 19:53:05.700 +05:00  INF  Executed DbCommand (334ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE "RoomService";
2024-03-20 19:53:06.712 +05:00  INF  Executed DbCommand (732ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "RoomService";
2024-03-20 19:53:07.041 +05:00  INF  Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Amenities" (
    "Id" uuid NOT NULL,
    "Title" text NOT NULL,
    "Description" text NULL,
    CONSTRAINT "PK_Amenities" PRIMARY KEY ("Id")
);
2024-03-20 19:53:07.055 +05:00  INF  Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Location" (
    "Id" uuid NOT NULL,
    "Country" text NOT NULL,
    "City" text NOT NULL,
    "Street" text NOT NULL,
    "HouseNumber" text NULL,
    CONSTRAINT "PK_Location" PRIMARY KEY ("Id")
);
2024-03-20 19:53:07.068 +05:00  INF  Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "RoomsTypes" (
    "Id" uuid NOT NULL,
    "Title" text NOT NULL,
    "Description" text NULL,
    "ImagePath" text NULL,
    "MaxCapacity" integer NOT NULL,
    "NightlyRate" numeric NOT NULL,
    CONSTRAINT "PK_RoomsTypes" PRIMARY KEY ("Id")
);
2024-03-20 19:53:07.083 +05:00  INF  Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "HotelBranches" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "LocationId" uuid NOT NULL,
    CONSTRAINT "PK_HotelBranches" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_HotelBranches_Location_LocationId" FOREIGN KEY ("LocationId") REFERENCES "Location" ("Id") ON DELETE CASCADE
);
2024-03-20 19:53:07.090 +05:00  INF  Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AmenityRoomType" (
    "AmenitiesId" uuid NOT NULL,
    "RoomTypesId" uuid NOT NULL,
    CONSTRAINT "PK_AmenityRoomType" PRIMARY KEY ("AmenitiesId", "RoomTypesId"),
    CONSTRAINT "FK_AmenityRoomType_Amenities_AmenitiesId" FOREIGN KEY ("AmenitiesId") REFERENCES "Amenities" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_AmenityRoomType_RoomsTypes_RoomTypesId" FOREIGN KEY ("RoomTypesId") REFERENCES "RoomsTypes" ("Id") ON DELETE CASCADE
);
2024-03-20 19:53:07.098 +05:00  INF  Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Reservations" (
    "Id" uuid NOT NULL,
    "DateIn" timestamp with time zone NOT NULL,
    "DateOut" timestamp with time zone NOT NULL,
    "MadeBy" integer NOT NULL,
    "Status" integer NOT NULL,
    "HotelBranchId" uuid NOT NULL,
    "ReservationCreatorId" uuid NOT NULL,
    CONSTRAINT "PK_Reservations" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Reservations_HotelBranches_HotelBranchId" FOREIGN KEY ("HotelBranchId") REFERENCES "HotelBranches" ("Id") ON DELETE CASCADE
);
2024-03-20 19:53:07.110 +05:00  INF  Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Rooms" (
    "Id" uuid NOT NULL,
    "Number" text NOT NULL,
    "TypeId" uuid NOT NULL,
    "HotelBranchId" uuid NOT NULL,
    CONSTRAINT "PK_Rooms" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Rooms_HotelBranches_HotelBranchId" FOREIGN KEY ("HotelBranchId") REFERENCES "HotelBranches" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Rooms_RoomsTypes_TypeId" FOREIGN KEY ("TypeId") REFERENCES "RoomsTypes" ("Id") ON DELETE CASCADE
);
2024-03-20 19:53:07.118 +05:00  INF  Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "OccupiedRooms" (
    "Id" uuid NOT NULL,
    "CheckIn" timestamp with time zone NULL,
    "CheckOut" timestamp with time zone NULL,
    "Status" integer NOT NULL,
    "RoomId" uuid NULL,
    "ReservationId" uuid NOT NULL,
    CONSTRAINT "PK_OccupiedRooms" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_OccupiedRooms_Reservations_ReservationId" FOREIGN KEY ("ReservationId") REFERENCES "Reservations" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_OccupiedRooms_Rooms_RoomId" FOREIGN KEY ("RoomId") REFERENCES "Rooms" ("Id")
);
2024-03-20 19:53:07.123 +05:00  INF  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AmenityRoomType_RoomTypesId" ON "AmenityRoomType" ("RoomTypesId");
2024-03-20 19:53:07.128 +05:00  INF  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_HotelBranches_LocationId" ON "HotelBranches" ("LocationId");
2024-03-20 19:53:07.134 +05:00  INF  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_OccupiedRooms_ReservationId" ON "OccupiedRooms" ("ReservationId");
2024-03-20 19:53:07.138 +05:00  INF  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_OccupiedRooms_RoomId" ON "OccupiedRooms" ("RoomId");
2024-03-20 19:53:07.141 +05:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Reservations_HotelBranchId" ON "Reservations" ("HotelBranchId");
2024-03-20 19:53:07.145 +05:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Rooms_HotelBranchId" ON "Rooms" ("HotelBranchId");
2024-03-20 19:53:07.150 +05:00  INF  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Rooms_TypeId" ON "Rooms" ("TypeId");
2024-03-20 19:53:07.921 +05:00  INF  Application started. Press Ctrl+C to shut down.
2024-03-20 19:53:07.922 +05:00  INF  Hosting environment: Development
2024-03-20 19:53:07.923 +05:00  INF  Content root path: C:\Users\Администратор\RiderProjects\Hotel\RoomService
2024-03-20 19:53:08.050 +05:00  INF  Request starting HTTP/2 GET https://localhost:44318/swagger - -
2024-03-20 19:53:08.276 +05:00  INF  Request finished HTTP/2 GET https://localhost:44318/swagger - - - 301 - - 237.5770ms
2024-03-20 19:53:08.331 +05:00  INF  Request starting HTTP/2 GET https://localhost:44318/swagger/index.html - -
2024-03-20 19:53:08.747 +05:00  INF  Request finished HTTP/2 GET https://localhost:44318/swagger/index.html - - - 200 - text/html;charset=utf-8 415.8099ms
2024-03-20 19:53:08.819 +05:00  INF  Request starting HTTP/2 GET https://localhost:44318/swagger/swagger-ui.css - -
2024-03-20 19:53:08.820 +05:00  INF  Request starting HTTP/2 GET https://localhost:44318/swagger/swagger-ui-bundle.js - -
2024-03-20 19:53:08.821 +05:00  INF  Request starting HTTP/2 GET https://localhost:44318/swagger/swagger-ui-standalone-preset.js - -
2024-03-20 19:53:08.863 +05:00  INF  Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-03-20 19:53:08.863 +05:00  INF  Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-03-20 19:53:08.869 +05:00  INF  Request finished HTTP/2 GET https://localhost:44318/swagger/swagger-ui.css - - - 200 143943 text/css 50.5830ms
2024-03-20 19:53:08.872 +05:00  INF  Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-03-20 19:53:08.878 +05:00  INF  Request finished HTTP/2 GET https://localhost:44318/swagger/swagger-ui-standalone-preset.js - - - 200 339486 text/javascript 56.5265ms
2024-03-20 19:53:08.911 +05:00  INF  Request finished HTTP/2 GET https://localhost:44318/swagger/swagger-ui-bundle.js - - - 200 1096145 text/javascript 90.7583ms
2024-03-20 19:53:09.189 +05:00  INF  Request starting HTTP/2 GET https://localhost:44318/swagger/favicon-32x32.png - -
2024-03-20 19:53:09.190 +05:00  INF  Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-03-20 19:53:09.191 +05:00  INF  Request finished HTTP/2 GET https://localhost:44318/swagger/favicon-32x32.png - - - 200 628 image/png 1.2876ms
2024-03-20 19:53:09.234 +05:00  INF  Request starting HTTP/2 GET https://localhost:44318/swagger/v1/swagger.json - -
2024-03-20 19:53:09.487 +05:00  INF  Request finished HTTP/2 GET https://localhost:44318/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 253.2346ms
2024-03-20 20:03:11.165 +05:00  INF  Application is shutting down...
