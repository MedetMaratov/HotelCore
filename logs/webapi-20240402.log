2024-04-02 15:39:21.356 +05:00  INF  Executed DbCommand (101ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-04-02 15:39:21.842 +05:00  INF  Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2024-04-02 15:39:22.032 +05:00  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-04-02 15:39:22.046 +05:00  INF  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-04-02 15:39:22.210 +05:00  INF  No migrations were applied. The database is already up to date.
2024-04-02 15:39:22.392 +05:00  INF  Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
REVOKE CONNECT ON DATABASE "GuestOrderingService" FROM PUBLIC;
SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE datname = 'GuestOrderingService';
2024-04-02 15:39:22.616 +05:00  INF  Executed DbCommand (223ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE "GuestOrderingService";
2024-04-02 15:39:23.880 +05:00  INF  Executed DbCommand (1,074ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "GuestOrderingService";
2024-04-02 15:39:24.346 +05:00  INF  Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Amenities" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "Description" text NOT NULL,
    CONSTRAINT "PK_Amenities" PRIMARY KEY ("Id")
);
2024-04-02 15:39:24.361 +05:00  INF  Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Services" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "Description" text NOT NULL,
    "WaitingTime" timestamp with time zone NOT NULL,
    "Price" numeric NOT NULL,
    CONSTRAINT "PK_Services" PRIMARY KEY ("Id")
);
2024-04-02 15:39:24.375 +05:00  INF  Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Schedules" (
    "Id" uuid NOT NULL,
    "StartTime" timestamp with time zone NOT NULL,
    "EndTime" timestamp with time zone NULL,
    "AmenityId" uuid NOT NULL,
    "Capacity" integer NULL,
    "RemainingCapacity" integer NULL,
    CONSTRAINT "PK_Schedules" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Schedules_Amenities_AmenityId" FOREIGN KEY ("AmenityId") REFERENCES "Amenities" ("Id") ON DELETE CASCADE
);
2024-04-02 15:39:24.381 +05:00  INF  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Orders" (
    "Id" uuid NOT NULL,
    "ServiceId" uuid NOT NULL,
    "CustomerId" uuid NOT NULL,
    "RoomId" uuid NOT NULL,
    "RequestTime" timestamp with time zone NOT NULL,
    "Status" integer NOT NULL,
    "CompleteTime" timestamp with time zone NULL,
    "CancelTime" timestamp with time zone NULL,
    CONSTRAINT "PK_Orders" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Orders_Services_ServiceId" FOREIGN KEY ("ServiceId") REFERENCES "Services" ("Id") ON DELETE CASCADE
);
2024-04-02 15:39:24.389 +05:00  INF  Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Reservations" (
    "Id" uuid NOT NULL,
    "GuestId" uuid NOT NULL,
    "AmenityScheduleId" uuid NOT NULL,
    "ScheduleId" uuid NOT NULL,
    "NumberOfPersons" integer NOT NULL,
    CONSTRAINT "PK_Reservations" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Reservations_Schedules_ScheduleId" FOREIGN KEY ("ScheduleId") REFERENCES "Schedules" ("Id") ON DELETE CASCADE
);
2024-04-02 15:39:24.396 +05:00  INF  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Orders_ServiceId" ON "Orders" ("ServiceId");
2024-04-02 15:39:24.398 +05:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Reservations_ScheduleId" ON "Reservations" ("ScheduleId");
2024-04-02 15:39:24.405 +05:00  INF  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Schedules_AmenityId" ON "Schedules" ("AmenityId");
2024-04-02 15:39:24.762 +05:00  INF  Application started. Press Ctrl+C to shut down.
2024-04-02 15:39:24.762 +05:00  INF  Hosting environment: Development
2024-04-02 15:39:24.762 +05:00  INF  Content root path: C:\Users\Администратор\RiderProjects\Hotel\GuestOrderingService
2024-04-02 15:39:25.025 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/swagger - -
2024-04-02 15:39:25.361 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/swagger - - - 301 - - 337.9518ms
2024-04-02 15:39:25.411 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/swagger/index.html - -
2024-04-02 15:39:25.706 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/swagger/index.html - - - 200 - text/html;charset=utf-8 294.8482ms
2024-04-02 15:39:25.781 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/swagger/swagger-ui.css - -
2024-04-02 15:39:25.782 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/swagger/swagger-ui-bundle.js - -
2024-04-02 15:39:25.784 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/swagger/swagger-ui-standalone-preset.js - -
2024-04-02 15:39:25.830 +05:00  INF  Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-04-02 15:39:25.830 +05:00  INF  Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-04-02 15:39:25.838 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/swagger/swagger-ui.css - - - 200 143943 text/css 57.6466ms
2024-04-02 15:39:25.842 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/swagger/swagger-ui-standalone-preset.js - - - 200 339486 text/javascript 57.5445ms
2024-04-02 15:39:25.843 +05:00  INF  Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-04-02 15:39:25.875 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/swagger/swagger-ui-bundle.js - - - 200 1096145 text/javascript 93.2088ms
2024-04-02 15:39:26.236 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/swagger/favicon-32x32.png - -
2024-04-02 15:39:26.237 +05:00  INF  Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-04-02 15:39:26.237 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/swagger/favicon-32x32.png - - - 200 628 image/png 1.1419ms
2024-04-02 15:39:26.300 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/swagger/v1/swagger.json - -
2024-04-02 15:39:26.427 +05:00  ERR  An unhandled exception has occurred while executing the request.Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Conflicting method/path combination "POST api/v1/services" for actions - GuestOrderingService.Controllers.AmenityController.CreateAsync (GuestOrderingService),GuestOrderingService.Controllers.ServiceController.CreateAsync (GuestOrderingService). Actions require a unique method/path combination for Swagger/OpenAPI 3.0. Use ConflictingActionsResolver as a workaround
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2024-04-02 15:39:26.475 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/swagger/v1/swagger.json - - - 500 - text/plain;+charset=utf-8 175.6240ms
2024-04-02 15:39:52.078 +05:00  INF  Application is shutting down...
2024-04-02 15:40:07.227 +05:00  INF  Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-04-02 15:40:07.527 +05:00  INF  Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2024-04-02 15:40:07.592 +05:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-04-02 15:40:07.599 +05:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-04-02 15:40:07.625 +05:00  INF  No migrations were applied. The database is already up to date.
2024-04-02 15:40:07.819 +05:00  INF  Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
REVOKE CONNECT ON DATABASE "GuestOrderingService" FROM PUBLIC;
SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE datname = 'GuestOrderingService';
2024-04-02 15:40:07.940 +05:00  INF  Executed DbCommand (120ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE "GuestOrderingService";
2024-04-02 15:40:08.834 +05:00  INF  Executed DbCommand (707ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "GuestOrderingService";
2024-04-02 15:40:09.012 +05:00  INF  Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Amenities" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "Description" text NOT NULL,
    CONSTRAINT "PK_Amenities" PRIMARY KEY ("Id")
);
2024-04-02 15:40:09.023 +05:00  INF  Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Services" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "Description" text NOT NULL,
    "WaitingTime" timestamp with time zone NOT NULL,
    "Price" numeric NOT NULL,
    CONSTRAINT "PK_Services" PRIMARY KEY ("Id")
);
2024-04-02 15:40:09.032 +05:00  INF  Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Schedules" (
    "Id" uuid NOT NULL,
    "StartTime" timestamp with time zone NOT NULL,
    "EndTime" timestamp with time zone NULL,
    "AmenityId" uuid NOT NULL,
    "Capacity" integer NULL,
    "RemainingCapacity" integer NULL,
    CONSTRAINT "PK_Schedules" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Schedules_Amenities_AmenityId" FOREIGN KEY ("AmenityId") REFERENCES "Amenities" ("Id") ON DELETE CASCADE
);
2024-04-02 15:40:09.040 +05:00  INF  Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Orders" (
    "Id" uuid NOT NULL,
    "ServiceId" uuid NOT NULL,
    "CustomerId" uuid NOT NULL,
    "RoomId" uuid NOT NULL,
    "RequestTime" timestamp with time zone NOT NULL,
    "Status" integer NOT NULL,
    "CompleteTime" timestamp with time zone NULL,
    "CancelTime" timestamp with time zone NULL,
    CONSTRAINT "PK_Orders" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Orders_Services_ServiceId" FOREIGN KEY ("ServiceId") REFERENCES "Services" ("Id") ON DELETE CASCADE
);
2024-04-02 15:40:09.044 +05:00  INF  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Reservations" (
    "Id" uuid NOT NULL,
    "GuestId" uuid NOT NULL,
    "AmenityScheduleId" uuid NOT NULL,
    "ScheduleId" uuid NOT NULL,
    "NumberOfPersons" integer NOT NULL,
    CONSTRAINT "PK_Reservations" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Reservations_Schedules_ScheduleId" FOREIGN KEY ("ScheduleId") REFERENCES "Schedules" ("Id") ON DELETE CASCADE
);
2024-04-02 15:40:09.049 +05:00  INF  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Orders_ServiceId" ON "Orders" ("ServiceId");
2024-04-02 15:40:09.053 +05:00  INF  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Reservations_ScheduleId" ON "Reservations" ("ScheduleId");
2024-04-02 15:40:09.057 +05:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Schedules_AmenityId" ON "Schedules" ("AmenityId");
2024-04-02 15:40:09.130 +05:00  INF  Application started. Press Ctrl+C to shut down.
2024-04-02 15:40:09.131 +05:00  INF  Hosting environment: Development
2024-04-02 15:40:09.131 +05:00  INF  Content root path: C:\Users\Администратор\RiderProjects\Hotel\GuestOrderingService
2024-04-02 15:40:09.179 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/swagger/index.html - -
2024-04-02 15:40:09.432 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/swagger/index.html - - - 200 - text/html;charset=utf-8 254.8891ms
2024-04-02 15:40:09.714 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/swagger/v1/swagger.json - -
2024-04-02 15:40:09.808 +05:00  ERR  An unhandled exception has occurred while executing the request.Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Conflicting method/path combination "POST api/v1/services" for actions - GuestOrderingService.Controllers.AmenityController.CreateAsync (GuestOrderingService),GuestOrderingService.Controllers.ServiceController.CreateAsync (GuestOrderingService). Actions require a unique method/path combination for Swagger/OpenAPI 3.0. Use ConflictingActionsResolver as a workaround
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2024-04-02 15:40:09.836 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/swagger/v1/swagger.json - - - 500 - text/plain;+charset=utf-8 122.2375ms
2024-04-02 15:40:19.266 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/swagger/v1/swagger.json - -
2024-04-02 15:40:19.273 +05:00  ERR  An unhandled exception has occurred while executing the request.Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Conflicting method/path combination "POST api/v1/services" for actions - GuestOrderingService.Controllers.AmenityController.CreateAsync (GuestOrderingService),GuestOrderingService.Controllers.ServiceController.CreateAsync (GuestOrderingService). Actions require a unique method/path combination for Swagger/OpenAPI 3.0. Use ConflictingActionsResolver as a workaround
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2024-04-02 15:40:19.323 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/swagger/v1/swagger.json - - - 500 - text/html;+charset=utf-8 56.6984ms
2024-04-02 15:40:19.381 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/favicon.ico - -
2024-04-02 15:40:19.387 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/favicon.ico - - - 404 - - 5.6629ms
2024-04-02 15:41:42.772 +05:00  INF  Application is shutting down...
2024-04-02 15:41:55.860 +05:00  INF  Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-04-02 15:41:56.125 +05:00  INF  Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2024-04-02 15:41:56.190 +05:00  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-04-02 15:41:56.199 +05:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-04-02 15:41:56.227 +05:00  INF  No migrations were applied. The database is already up to date.
2024-04-02 15:41:56.424 +05:00  INF  Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
REVOKE CONNECT ON DATABASE "GuestOrderingService" FROM PUBLIC;
SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE datname = 'GuestOrderingService';
2024-04-02 15:41:56.520 +05:00  INF  Executed DbCommand (96ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE "GuestOrderingService";
2024-04-02 15:41:57.529 +05:00  INF  Executed DbCommand (850ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "GuestOrderingService";
2024-04-02 15:41:57.825 +05:00  INF  Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Amenities" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "Description" text NOT NULL,
    CONSTRAINT "PK_Amenities" PRIMARY KEY ("Id")
);
2024-04-02 15:41:57.834 +05:00  INF  Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Services" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "Description" text NOT NULL,
    "WaitingTime" timestamp with time zone NOT NULL,
    "Price" numeric NOT NULL,
    CONSTRAINT "PK_Services" PRIMARY KEY ("Id")
);
2024-04-02 15:41:57.844 +05:00  INF  Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Schedules" (
    "Id" uuid NOT NULL,
    "StartTime" timestamp with time zone NOT NULL,
    "EndTime" timestamp with time zone NULL,
    "AmenityId" uuid NOT NULL,
    "Capacity" integer NULL,
    "RemainingCapacity" integer NULL,
    CONSTRAINT "PK_Schedules" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Schedules_Amenities_AmenityId" FOREIGN KEY ("AmenityId") REFERENCES "Amenities" ("Id") ON DELETE CASCADE
);
2024-04-02 15:41:57.851 +05:00  INF  Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Orders" (
    "Id" uuid NOT NULL,
    "ServiceId" uuid NOT NULL,
    "CustomerId" uuid NOT NULL,
    "RoomId" uuid NOT NULL,
    "RequestTime" timestamp with time zone NOT NULL,
    "Status" integer NOT NULL,
    "CompleteTime" timestamp with time zone NULL,
    "CancelTime" timestamp with time zone NULL,
    CONSTRAINT "PK_Orders" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Orders_Services_ServiceId" FOREIGN KEY ("ServiceId") REFERENCES "Services" ("Id") ON DELETE CASCADE
);
2024-04-02 15:41:57.857 +05:00  INF  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Reservations" (
    "Id" uuid NOT NULL,
    "GuestId" uuid NOT NULL,
    "AmenityScheduleId" uuid NOT NULL,
    "ScheduleId" uuid NOT NULL,
    "NumberOfPersons" integer NOT NULL,
    CONSTRAINT "PK_Reservations" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Reservations_Schedules_ScheduleId" FOREIGN KEY ("ScheduleId") REFERENCES "Schedules" ("Id") ON DELETE CASCADE
);
2024-04-02 15:41:57.860 +05:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Orders_ServiceId" ON "Orders" ("ServiceId");
2024-04-02 15:41:57.864 +05:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Reservations_ScheduleId" ON "Reservations" ("ScheduleId");
2024-04-02 15:41:57.868 +05:00  INF  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Schedules_AmenityId" ON "Schedules" ("AmenityId");
2024-04-02 15:41:57.924 +05:00  INF  Application started. Press Ctrl+C to shut down.
2024-04-02 15:41:57.924 +05:00  INF  Hosting environment: Development
2024-04-02 15:41:57.924 +05:00  INF  Content root path: C:\Users\Администратор\RiderProjects\Hotel\GuestOrderingService
2024-04-02 15:41:57.956 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/swagger/index.html - -
2024-04-02 15:41:58.211 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/swagger/index.html - - - 200 - text/html;charset=utf-8 257.0325ms
2024-04-02 15:41:58.456 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/swagger/v1/swagger.json - -
2024-04-02 15:41:58.603 +05:00  ERR  An unhandled exception has occurred while executing the request.Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Conflicting method/path combination "GET amenity/{amenityId}" for actions - GuestOrderingService.Controllers.ReservationController.GetAllByAsync (GuestOrderingService),GuestOrderingService.Controllers.ScheduleController.GetAllByAmenityIdAsync (GuestOrderingService). Actions require a unique method/path combination for Swagger/OpenAPI 3.0. Use ConflictingActionsResolver as a workaround
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2024-04-02 15:41:58.624 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/swagger/v1/swagger.json - - - 500 - text/plain;+charset=utf-8 168.0590ms
2024-04-02 15:42:38.747 +05:00  INF  Application is shutting down...
2024-04-02 15:42:54.284 +05:00  INF  Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-04-02 15:42:54.637 +05:00  INF  Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2024-04-02 15:42:54.715 +05:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-04-02 15:42:54.726 +05:00  INF  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-04-02 15:42:54.771 +05:00  INF  No migrations were applied. The database is already up to date.
2024-04-02 15:42:55.021 +05:00  INF  Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
REVOKE CONNECT ON DATABASE "GuestOrderingService" FROM PUBLIC;
SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE datname = 'GuestOrderingService';
2024-04-02 15:42:55.154 +05:00  INF  Executed DbCommand (133ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE "GuestOrderingService";
2024-04-02 15:42:56.207 +05:00  INF  Executed DbCommand (810ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "GuestOrderingService";
2024-04-02 15:42:56.450 +05:00  INF  Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Amenities" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "Description" text NOT NULL,
    CONSTRAINT "PK_Amenities" PRIMARY KEY ("Id")
);
2024-04-02 15:42:56.461 +05:00  INF  Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Services" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "Description" text NOT NULL,
    "WaitingTime" timestamp with time zone NOT NULL,
    "Price" numeric NOT NULL,
    CONSTRAINT "PK_Services" PRIMARY KEY ("Id")
);
2024-04-02 15:42:56.472 +05:00  INF  Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Schedules" (
    "Id" uuid NOT NULL,
    "StartTime" timestamp with time zone NOT NULL,
    "EndTime" timestamp with time zone NULL,
    "AmenityId" uuid NOT NULL,
    "Capacity" integer NULL,
    "RemainingCapacity" integer NULL,
    CONSTRAINT "PK_Schedules" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Schedules_Amenities_AmenityId" FOREIGN KEY ("AmenityId") REFERENCES "Amenities" ("Id") ON DELETE CASCADE
);
2024-04-02 15:42:56.478 +05:00  INF  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Orders" (
    "Id" uuid NOT NULL,
    "ServiceId" uuid NOT NULL,
    "CustomerId" uuid NOT NULL,
    "RoomId" uuid NOT NULL,
    "RequestTime" timestamp with time zone NOT NULL,
    "Status" integer NOT NULL,
    "CompleteTime" timestamp with time zone NULL,
    "CancelTime" timestamp with time zone NULL,
    CONSTRAINT "PK_Orders" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Orders_Services_ServiceId" FOREIGN KEY ("ServiceId") REFERENCES "Services" ("Id") ON DELETE CASCADE
);
2024-04-02 15:42:56.484 +05:00  INF  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Reservations" (
    "Id" uuid NOT NULL,
    "GuestId" uuid NOT NULL,
    "AmenityScheduleId" uuid NOT NULL,
    "ScheduleId" uuid NOT NULL,
    "NumberOfPersons" integer NOT NULL,
    CONSTRAINT "PK_Reservations" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Reservations_Schedules_ScheduleId" FOREIGN KEY ("ScheduleId") REFERENCES "Schedules" ("Id") ON DELETE CASCADE
);
2024-04-02 15:42:56.488 +05:00  INF  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Orders_ServiceId" ON "Orders" ("ServiceId");
2024-04-02 15:42:56.493 +05:00  INF  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Reservations_ScheduleId" ON "Reservations" ("ScheduleId");
2024-04-02 15:42:56.498 +05:00  INF  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Schedules_AmenityId" ON "Schedules" ("AmenityId");
2024-04-02 15:42:56.602 +05:00  INF  Application started. Press Ctrl+C to shut down.
2024-04-02 15:42:56.602 +05:00  INF  Hosting environment: Development
2024-04-02 15:42:56.602 +05:00  INF  Content root path: C:\Users\Администратор\RiderProjects\Hotel\GuestOrderingService
2024-04-02 15:42:56.652 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/swagger/index.html - -
2024-04-02 15:42:56.904 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/swagger/index.html - - - 200 - text/html;charset=utf-8 259.2406ms
2024-04-02 15:42:57.770 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/swagger/v1/swagger.json - -
2024-04-02 15:42:58.252 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 482.3218ms
2024-04-02 15:43:03.269 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/api/v1/amenities - -
2024-04-02 15:43:03.274 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/api/v1/amenities - - - 404 - - 5.8091ms
2024-04-02 15:43:22.883 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/3fa85f64-5717-4562-b3fc-2c963f66afa6 - -
2024-04-02 15:43:22.884 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/3fa85f64-5717-4562-b3fc-2c963f66afa6 - - - 404 - - 0.6547ms
2024-04-02 15:43:36.611 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/api/v1/orders - -
2024-04-02 15:43:36.612 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/api/v1/orders - - - 404 - - 0.7150ms
2024-04-02 15:43:39.316 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/api/v1/orders - -
2024-04-02 15:43:39.317 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/api/v1/orders - - - 404 - - 0.7128ms
2024-04-02 15:43:47.027 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/api/v1/orders/3fa85f64-5717-4562-b3fc-2c963f66afa6 - -
2024-04-02 15:43:47.028 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/api/v1/orders/3fa85f64-5717-4562-b3fc-2c963f66afa6 - - - 404 - - 0.8096ms
2024-04-02 15:44:04.620 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/api/v1/reservations/amenity/3fa85f64-5717-4562-b3fc-2c963f66afa6 - -
2024-04-02 15:44:04.620 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/api/v1/reservations/amenity/3fa85f64-5717-4562-b3fc-2c963f66afa6 - - - 404 - - 0.7074ms
2024-04-02 15:44:14.473 +05:00  INF  Request starting HTTP/2 POST https://localhost:44314/api/v1/amenities application/json 49
2024-04-02 15:44:14.474 +05:00  INF  Request finished HTTP/2 POST https://localhost:44314/api/v1/amenities application/json 49 - 404 - - 0.4895ms
2024-04-02 15:44:15.612 +05:00  INF  Request starting HTTP/2 POST https://localhost:44314/api/v1/amenities application/json 49
2024-04-02 15:44:15.613 +05:00  INF  Request finished HTTP/2 POST https://localhost:44314/api/v1/amenities application/json 49 - 404 - - 0.8499ms
2024-04-02 15:44:17.708 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/api/v1/amenities - -
2024-04-02 15:44:17.709 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/api/v1/amenities - - - 404 - - 0.9336ms
2024-04-02 15:44:27.270 +05:00  INF  Request starting HTTP/2 POST https://localhost:44314/api/v1/amenities application/json 49
2024-04-02 15:44:27.271 +05:00  INF  Request finished HTTP/2 POST https://localhost:44314/api/v1/amenities application/json 49 - 404 - - 0.7731ms
2024-04-02 15:45:37.115 +05:00  INF  Application is shutting down...
2024-04-02 15:46:05.796 +05:00  INF  Executed DbCommand (883ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-04-02 15:46:06.286 +05:00  INF  Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2024-04-02 15:46:06.654 +05:00  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-04-02 15:46:06.668 +05:00  INF  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-04-02 15:46:06.802 +05:00  INF  No migrations were applied. The database is already up to date.
2024-04-02 15:46:07.158 +05:00  INF  Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
REVOKE CONNECT ON DATABASE "GuestOrderingService" FROM PUBLIC;
SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE datname = 'GuestOrderingService';
2024-04-02 15:46:07.274 +05:00  INF  Executed DbCommand (116ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE "GuestOrderingService";
2024-04-02 15:46:07.989 +05:00  INF  Executed DbCommand (534ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "GuestOrderingService";
2024-04-02 15:46:08.175 +05:00  INF  Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Amenities" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "Description" text NOT NULL,
    CONSTRAINT "PK_Amenities" PRIMARY KEY ("Id")
);
2024-04-02 15:46:08.186 +05:00  INF  Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Services" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "Description" text NOT NULL,
    "WaitingTime" timestamp with time zone NOT NULL,
    "Price" numeric NOT NULL,
    CONSTRAINT "PK_Services" PRIMARY KEY ("Id")
);
2024-04-02 15:46:08.197 +05:00  INF  Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Schedules" (
    "Id" uuid NOT NULL,
    "StartTime" timestamp with time zone NOT NULL,
    "EndTime" timestamp with time zone NULL,
    "AmenityId" uuid NOT NULL,
    "Capacity" integer NULL,
    "RemainingCapacity" integer NULL,
    CONSTRAINT "PK_Schedules" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Schedules_Amenities_AmenityId" FOREIGN KEY ("AmenityId") REFERENCES "Amenities" ("Id") ON DELETE CASCADE
);
2024-04-02 15:46:08.206 +05:00  INF  Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Orders" (
    "Id" uuid NOT NULL,
    "ServiceId" uuid NOT NULL,
    "CustomerId" uuid NOT NULL,
    "RoomId" uuid NOT NULL,
    "RequestTime" timestamp with time zone NOT NULL,
    "Status" integer NOT NULL,
    "CompleteTime" timestamp with time zone NULL,
    "CancelTime" timestamp with time zone NULL,
    CONSTRAINT "PK_Orders" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Orders_Services_ServiceId" FOREIGN KEY ("ServiceId") REFERENCES "Services" ("Id") ON DELETE CASCADE
);
2024-04-02 15:46:08.210 +05:00  INF  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Reservations" (
    "Id" uuid NOT NULL,
    "GuestId" uuid NOT NULL,
    "AmenityScheduleId" uuid NOT NULL,
    "ScheduleId" uuid NOT NULL,
    "NumberOfPersons" integer NOT NULL,
    CONSTRAINT "PK_Reservations" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Reservations_Schedules_ScheduleId" FOREIGN KEY ("ScheduleId") REFERENCES "Schedules" ("Id") ON DELETE CASCADE
);
2024-04-02 15:46:08.216 +05:00  INF  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Orders_ServiceId" ON "Orders" ("ServiceId");
2024-04-02 15:46:08.219 +05:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Reservations_ScheduleId" ON "Reservations" ("ScheduleId");
2024-04-02 15:46:08.224 +05:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Schedules_AmenityId" ON "Schedules" ("AmenityId");
2024-04-02 15:46:08.423 +05:00  INF  Application started. Press Ctrl+C to shut down.
2024-04-02 15:46:08.424 +05:00  INF  Hosting environment: Development
2024-04-02 15:46:08.424 +05:00  INF  Content root path: C:\Users\Администратор\RiderProjects\Hotel\GuestOrderingService
2024-04-02 15:46:08.527 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/swagger/index.html - -
2024-04-02 15:46:08.889 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/swagger/index.html - - - 200 - text/html;charset=utf-8 363.7355ms
2024-04-02 15:46:09.260 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/swagger/v1/swagger.json - -
2024-04-02 15:46:09.583 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 316.9283ms
2024-04-02 15:46:14.450 +05:00  INF  Request starting HTTP/2 POST https://localhost:44314/api/v1/amenities application/json 49
2024-04-02 15:46:14.456 +05:00  INF  Request finished HTTP/2 POST https://localhost:44314/api/v1/amenities application/json 49 - 404 - - 5.4910ms
2024-04-02 15:47:05.617 +05:00  INF  Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-04-02 15:47:05.863 +05:00  INF  Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2024-04-02 15:47:05.926 +05:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-04-02 15:47:05.935 +05:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-04-02 15:47:05.968 +05:00  INF  No migrations were applied. The database is already up to date.
2024-04-02 15:47:06.164 +05:00  INF  Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
REVOKE CONNECT ON DATABASE "GuestOrderingService" FROM PUBLIC;
SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE datname = 'GuestOrderingService';
2024-04-02 15:47:06.251 +05:00  INF  Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE "GuestOrderingService";
2024-04-02 15:47:06.941 +05:00  INF  Executed DbCommand (543ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "GuestOrderingService";
2024-04-02 15:47:07.229 +05:00  INF  Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Amenities" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "Description" text NOT NULL,
    CONSTRAINT "PK_Amenities" PRIMARY KEY ("Id")
);
2024-04-02 15:47:07.238 +05:00  INF  Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Services" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "Description" text NOT NULL,
    "WaitingTime" timestamp with time zone NOT NULL,
    "Price" numeric NOT NULL,
    CONSTRAINT "PK_Services" PRIMARY KEY ("Id")
);
2024-04-02 15:47:07.247 +05:00  INF  Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Schedules" (
    "Id" uuid NOT NULL,
    "StartTime" timestamp with time zone NOT NULL,
    "EndTime" timestamp with time zone NULL,
    "AmenityId" uuid NOT NULL,
    "Capacity" integer NULL,
    "RemainingCapacity" integer NULL,
    CONSTRAINT "PK_Schedules" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Schedules_Amenities_AmenityId" FOREIGN KEY ("AmenityId") REFERENCES "Amenities" ("Id") ON DELETE CASCADE
);
2024-04-02 15:47:07.253 +05:00  INF  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Orders" (
    "Id" uuid NOT NULL,
    "ServiceId" uuid NOT NULL,
    "CustomerId" uuid NOT NULL,
    "RoomId" uuid NOT NULL,
    "RequestTime" timestamp with time zone NOT NULL,
    "Status" integer NOT NULL,
    "CompleteTime" timestamp with time zone NULL,
    "CancelTime" timestamp with time zone NULL,
    CONSTRAINT "PK_Orders" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Orders_Services_ServiceId" FOREIGN KEY ("ServiceId") REFERENCES "Services" ("Id") ON DELETE CASCADE
);
2024-04-02 15:47:07.258 +05:00  INF  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Reservations" (
    "Id" uuid NOT NULL,
    "GuestId" uuid NOT NULL,
    "AmenityScheduleId" uuid NOT NULL,
    "ScheduleId" uuid NOT NULL,
    "NumberOfPersons" integer NOT NULL,
    CONSTRAINT "PK_Reservations" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Reservations_Schedules_ScheduleId" FOREIGN KEY ("ScheduleId") REFERENCES "Schedules" ("Id") ON DELETE CASCADE
);
2024-04-02 15:47:07.263 +05:00  INF  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Orders_ServiceId" ON "Orders" ("ServiceId");
2024-04-02 15:47:07.266 +05:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Reservations_ScheduleId" ON "Reservations" ("ScheduleId");
2024-04-02 15:47:07.269 +05:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Schedules_AmenityId" ON "Schedules" ("AmenityId");
2024-04-02 15:47:07.334 +05:00  INF  Application started. Press Ctrl+C to shut down.
2024-04-02 15:47:07.334 +05:00  INF  Hosting environment: Development
2024-04-02 15:47:07.334 +05:00  INF  Content root path: C:\Users\Администратор\RiderProjects\Hotel\GuestOrderingService
2024-04-02 15:47:07.381 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/swagger/index.html - -
2024-04-02 15:47:07.641 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/swagger/index.html - - - 200 - text/html;charset=utf-8 264.4973ms
2024-04-02 15:47:07.941 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/swagger/v1/swagger.json - -
2024-04-02 15:47:08.153 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 211.3852ms
2024-04-02 15:47:13.066 +05:00  INF  Request starting HTTP/2 POST https://localhost:44314/api/v1/amenities application/json 49
2024-04-02 15:47:13.071 +05:00  INF  Request finished HTTP/2 POST https://localhost:44314/api/v1/amenities application/json 49 - 404 - - 4.8311ms
2024-04-02 15:47:53.208 +05:00  INF  Application is shutting down...
2024-04-02 15:48:07.299 +05:00  INF  Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-04-02 15:48:07.555 +05:00  INF  Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2024-04-02 15:48:07.622 +05:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-04-02 15:48:07.631 +05:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-04-02 15:48:07.664 +05:00  INF  No migrations were applied. The database is already up to date.
2024-04-02 15:48:07.863 +05:00  INF  Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
REVOKE CONNECT ON DATABASE "GuestOrderingService" FROM PUBLIC;
SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE datname = 'GuestOrderingService';
2024-04-02 15:48:07.956 +05:00  INF  Executed DbCommand (93ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE "GuestOrderingService";
2024-04-02 15:48:08.697 +05:00  INF  Executed DbCommand (593ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "GuestOrderingService";
2024-04-02 15:48:09.038 +05:00  INF  Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Amenities" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "Description" text NOT NULL,
    CONSTRAINT "PK_Amenities" PRIMARY KEY ("Id")
);
2024-04-02 15:48:09.050 +05:00  INF  Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Services" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "Description" text NOT NULL,
    "WaitingTime" timestamp with time zone NOT NULL,
    "Price" numeric NOT NULL,
    CONSTRAINT "PK_Services" PRIMARY KEY ("Id")
);
2024-04-02 15:48:09.061 +05:00  INF  Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Schedules" (
    "Id" uuid NOT NULL,
    "StartTime" timestamp with time zone NOT NULL,
    "EndTime" timestamp with time zone NULL,
    "AmenityId" uuid NOT NULL,
    "Capacity" integer NULL,
    "RemainingCapacity" integer NULL,
    CONSTRAINT "PK_Schedules" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Schedules_Amenities_AmenityId" FOREIGN KEY ("AmenityId") REFERENCES "Amenities" ("Id") ON DELETE CASCADE
);
2024-04-02 15:48:09.068 +05:00  INF  Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Orders" (
    "Id" uuid NOT NULL,
    "ServiceId" uuid NOT NULL,
    "CustomerId" uuid NOT NULL,
    "RoomId" uuid NOT NULL,
    "RequestTime" timestamp with time zone NOT NULL,
    "Status" integer NOT NULL,
    "CompleteTime" timestamp with time zone NULL,
    "CancelTime" timestamp with time zone NULL,
    CONSTRAINT "PK_Orders" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Orders_Services_ServiceId" FOREIGN KEY ("ServiceId") REFERENCES "Services" ("Id") ON DELETE CASCADE
);
2024-04-02 15:48:09.073 +05:00  INF  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Reservations" (
    "Id" uuid NOT NULL,
    "GuestId" uuid NOT NULL,
    "AmenityScheduleId" uuid NOT NULL,
    "ScheduleId" uuid NOT NULL,
    "NumberOfPersons" integer NOT NULL,
    CONSTRAINT "PK_Reservations" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Reservations_Schedules_ScheduleId" FOREIGN KEY ("ScheduleId") REFERENCES "Schedules" ("Id") ON DELETE CASCADE
);
2024-04-02 15:48:09.078 +05:00  INF  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Orders_ServiceId" ON "Orders" ("ServiceId");
2024-04-02 15:48:09.081 +05:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Reservations_ScheduleId" ON "Reservations" ("ScheduleId");
2024-04-02 15:48:09.085 +05:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Schedules_AmenityId" ON "Schedules" ("AmenityId");
2024-04-02 15:48:09.261 +05:00  INF  Application started. Press Ctrl+C to shut down.
2024-04-02 15:48:09.261 +05:00  INF  Hosting environment: Development
2024-04-02 15:48:09.262 +05:00  INF  Content root path: C:\Users\Администратор\RiderProjects\Hotel\GuestOrderingService
2024-04-02 15:48:09.292 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/swagger/index.html - -
2024-04-02 15:48:09.564 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/swagger/index.html - - - 200 - text/html;charset=utf-8 276.7236ms
2024-04-02 15:48:09.821 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/swagger/v1/swagger.json - -
2024-04-02 15:48:09.983 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 161.8195ms
2024-04-02 15:48:13.252 +05:00  INF  Request starting HTTP/2 POST https://localhost:44314/api/v1/amenities application/json 49
2024-04-02 15:48:13.268 +05:00  INF  Executing endpoint 'GuestOrderingService.Controllers.AmenityController.CreateAsync (GuestOrderingService)'
2024-04-02 15:48:13.319 +05:00  INF  Route matched with {action = "Create", controller = "Amenity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateAsync(GuestOrderingService.DTO.CreateAmenityDto, System.Threading.CancellationToken) on controller GuestOrderingService.Controllers.AmenityController (GuestOrderingService).
2024-04-02 15:48:13.381 +05:00  INF  Executing action method GuestOrderingService.Controllers.AmenityController.CreateAsync (GuestOrderingService) - Validation state: "Valid"
2024-04-02 15:48:14.076 +05:00  INF  Executed DbCommand (62ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Amenities" ("Id", "Description", "Name")
VALUES (@p0, @p1, @p2);
2024-04-02 15:48:14.152 +05:00  INF  Executed action method GuestOrderingService.Controllers.AmenityController.CreateAsync (GuestOrderingService), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 758.686ms.
2024-04-02 15:48:14.181 +05:00  INF  Executing OkObjectResult, writing value of type 'System.Guid'.
2024-04-02 15:48:14.220 +05:00  INF  Executed action GuestOrderingService.Controllers.AmenityController.CreateAsync (GuestOrderingService) in 886.6109ms
2024-04-02 15:48:14.224 +05:00  INF  Executed endpoint 'GuestOrderingService.Controllers.AmenityController.CreateAsync (GuestOrderingService)'
2024-04-02 15:48:14.257 +05:00  INF  Request finished HTTP/2 POST https://localhost:44314/api/v1/amenities application/json 49 - 200 - application/json;+charset=utf-8 1004.2991ms
2024-04-02 15:48:23.114 +05:00  INF  Request starting HTTP/2 GET https://localhost:44314/api/v1/amenities - -
2024-04-02 15:48:23.118 +05:00  INF  Executing endpoint 'GuestOrderingService.Controllers.AmenityController.GetAllAsync (GuestOrderingService)'
2024-04-02 15:48:23.130 +05:00  INF  Route matched with {action = "GetAll", controller = "Amenity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllAsync(System.Threading.CancellationToken) on controller GuestOrderingService.Controllers.AmenityController (GuestOrderingService).
2024-04-02 15:48:23.132 +05:00  INF  Executing action method GuestOrderingService.Controllers.AmenityController.GetAllAsync (GuestOrderingService) - Validation state: "Valid"
2024-04-02 15:48:23.861 +05:00  INF  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Name", a."Description"
FROM "Amenities" AS a
2024-04-02 15:48:23.882 +05:00  INF  Executed action method GuestOrderingService.Controllers.AmenityController.GetAllAsync (GuestOrderingService), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 749.6841ms.
2024-04-02 15:48:23.883 +05:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[GuestOrderingService.DTO.ResponseAmenityDto, GuestOrderingService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-02 15:48:23.900 +05:00  INF  Executed action GuestOrderingService.Controllers.AmenityController.GetAllAsync (GuestOrderingService) in 770.0629ms
2024-04-02 15:48:23.901 +05:00  INF  Executed endpoint 'GuestOrderingService.Controllers.AmenityController.GetAllAsync (GuestOrderingService)'
2024-04-02 15:48:23.902 +05:00  INF  Request finished HTTP/2 GET https://localhost:44314/api/v1/amenities - - - 200 - application/json;+charset=utf-8 787.6566ms
2024-04-02 15:48:32.886 +05:00  INF  Application is shutting down...
